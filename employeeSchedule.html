<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Employee Page</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/b1b6f02eef.js" crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-database.js"></script>


</head>
<body>

<!--navbar-->
<div class="w3-bar w3-black w3-card">
    <a href="#home" class="w3-bar-item w3-button w3-padding-large"><span style="color: rgb(247, 244, 243);">
            <i class="fas fa-cat" onclick="home()" id="home"></i>
                </span></a>
    <a href="#schedule" class="w3-bar-item w3-button w3-padding-large" onclick="schedule()">Schedule</a>
    <a href="javascript:void(0)" class="w3-padding-large w3-hover-white w3-hide-small w3-right"><i
            class="far fa-bell"></i></a>
    <a href="javascript:void(0)" class="w3-padding-large w3-hover-white w3-hide-small w3-right"><i
            class="far fa-comments"></i></a>

    <div class="w3-dropdown-hover w3-hide-small w3-right">
        <button class="w3-padding-large w3-button" title="account"><span style="color: rgb(247, 244, 243);"><i
                class="fas fa-user-astronaut"></i></span></button>
        <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="#account" class="w3-padding-large w3-bar-item w3-button" onclick="accnt()">Account</a>
            <a href="#logout" class="w3-padding-large w3-bar-item w3-button" onclick="logout()">Log Out</a>
        </div>
    </div>
</div>
<div>

<div class="w3-modal" id="logoutform" style="display:none">
    <form class="w3-modal-content">
      <h1>Are you sure you want to log out?</h1>
  
      <button class="w3-button w3-black" onclick="confirmLogOut()">Log Out</button>
      <button class="w3-button w3-black" onclick="closeForm()">Close</button>
    </form>
  </div>


<div class ="w3-container w3-center w3-padding-32">
    <h1>Schedule</h1>
    <div class ="w3-row-padding">
      <div class="w3-center ">
  
          <table width="100%">
              <tr>
  
                  <th class="doW"></th>
                  <th class="doW"></th>
                  <th class="doW">S</th>
                  <th class="doW">M</th>
                  <th class="doW">T</th>
                  <th class="doW">W</th>
                  <th class="doW">T</th>
                  <th class="doW">F</th>
                  <th class="doW">S</th>
  
              </tr>
              <tr>
                  <th rowspan=9></th>
                  <th id="01112">11AM-12PM</th>
                  <td><p id="01">1</p></td>
                  <td><p id="02">1</p></td>
                  <td><p id="03">1</p></td>
                  <td><p id="04">1</p></td>
                  <td><p id="05">1</p></td>
                  <td><p id="06">1</p></td>
                  <td><p id="07">1</p></td>
              </tr>
              <tr>
                  <th id="01201">12PM-1PM</th>
                  <td><p id="11">1</p></td>
                  <td><p id="12">1</p></td>
                  <td><p id="13">1</p></td>
                  <td><p id="14">1</p></td>
                  <td><p id="15">1</p></td>
                  <td><p id="16">1</p></td>
                  <td><p id="17">1</p></td>
              </tr>
              <tr>
                  <th id="00102">1PM-2PM</th>
                  <td><p id="21">1</p></td>
                  <td><p id="22">1</p></td>
                  <td><p id="23">1</p></td>
                  <td><p id="24">1</p></td>
                  <td><p id="25">1</p></td>
                  <td><p id="26">1</p></td>
                  <td><p id="27">1</p></td>
              </tr>
              <tr>
                  <th id="00203">2PM-3PM</th>
                  <td><p id="31">1</p></td>
                  <td><p id="32">1</p></td>
                  <td><p id="33">1</p></td>
                  <td><p id="34">1</p></td>
                  <td><p id="35">1</p></td>
                  <td><p id="36">1</p></td>
                  <td><p id="37">1</p></td>
              </tr>
              <tr>
                  <th id="00304">3PM-4PM</th>
                  <td><p id="41">1</p></td>
                  <td><p id="42">1</p></td>
                  <td><p id="43">1</p></td>
                  <td><p id="44">1</p></td>
                  <td><p id="45">1</p></td>
                  <td><p id="46">1</p></td>
                  <td><p id="47">1</p></td>
              </tr>
              <tr>
                  <th id="00405">4PM-5PM</th>
                  <td><p id="51">1</p></td>
                  <td><p id="52">1</p></td>
                  <td><p id="53">1</p></td>
                  <td><p id="54">1</p></td>
                  <td><p id="55">1</p></td>
                  <td><p id="56">1</p></td>
                  <td><p id="57">1</p></td>
              </tr>
              <tr>
                  <th id="00506">5PM-6PM</th>
                  <td><p id="61">1</p></td>
                  <td><p id="62">1</p></td>
                  <td><p id="63">1</p></td>
                  <td><p id="64">1</p></td>
                  <td><p id="65">1</p></td>
                  <td><p id="66">1</p></td>
                  <td><p id="67">1</p></td>
              </tr>
              <tr>
                  <th id="00607">6PM-7PM</th>
                  <td><p id="71">1</p></td>
                  <td><p id="72">1</p></td>
                  <td><p id="73">1</p></td>
                  <td><p id="74">1</p></td>
                  <td><p id="75">1</p></td>
                  <td><p id="76">1</p></td>
                  <td><p id="77">1</p></td>
              </tr>
              <tr>
                  <th id="00708">7PM-8PM</th>
                  <td><p id="81">1</p></td>
                  <td><p id="82">1</p></td>
                  <td><p id="83">1</p></td>
                  <td><p id="84">1</p></td>
                  <td><p id="85">1</p></td>
                  <td><p id="86">1</p></td>
                  <td><p id="87">1</p></td>
              </tr>
  
  
          </table>
  
  
      </div>
  </div>

    <div class="w3-row-padding w3-border">
        <div class ="w3-quarter"><p> </p></div>
        <div class ="w3-quarter">
        <label for="issue"><b>Report An Issue:</b></label>
        </div>
        <div class ="w3-quarter">
            <textarea id="issue" class="w3-left" placeholder="Date and issue"></textarea>
            <button class="w3-right" id="issueSub">submit</button>
        </div>
    </div><br>
    <div class="w3-row-padding w3-border">
        <div class ="w3-quarter"><p> </p></div>
        <div class ="w3-quarter">
        <label for="trade"><b>Suggest a shift trade:</b></label>
        </div>
        <div class ="w3-quarter">
            <textarea id="trade" class="w3-left" placeholder="Employee and shift times"></textarea>
            <button class="w3-right" id="TradeSub">submit</button>
        </div>
    </div>
    <br><br>
    <div class="w3-center">
        <b>Request a day off:</b>
    </div>
    <br><br>
    <iframe src="https://calendar.google.com/calendar/embed?height=600&amp;wkst=7&amp;bgcolor=%23ffffff&amp;ctz=America%2FLos_Angeles&amp;src=eG9ra2F0eG9AZ21haWwuY29t&amp;src=YWRkcmVzc2Jvb2sjY29udGFjdHNAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&amp;src=bXJqanFubTE3dDQ3N3Z2OHEwcjJlZXJkMGdAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&amp;src=ZW4udXNhI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&amp;color=%237986CB&amp;color=%237986CB&amp;color=%239E69AF&amp;color=%23616161&amp;showPrint=0&amp;title=Choose%20a%20day&amp;showTabs=0&amp;showCalendars=0" style="border:solid 1px #777" width="800" height="600" frameborder="0" scrolling="no"></iframe>
    <br><br>
    <button>Submit</button>
</div>

</div>

<script>
var firebaseConfig = {
        apiKey: "AIzaSyCMkSmHmn_zNCoHwthP9J6HtqPgtwokXyo",
        authDomain: "capstone450.firebaseapp.com",
        databaseURL: "https://capstone450-default-rtdb.firebaseio.com",
        projectId: "capstone450",
        storageBucket: "capstone450.appspot.com",
        messagingSenderId: "706717697173",
        appId: "1:706717697173:web:00b44ba17bb2fa112bc79c",
        measurementId: "G-V28RYN23J2"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

var uid = location.search.substring(1);

function logout(){
  document.getElementById("logoutform").style.display = "block";
}

function confirmLogOut(){
  firebase.auth().signOut().then(() => {
    window.location.href = "/index.html"
  }).catch((error) => {
    alert("error")
  });
}

function home(){
  window.location.href = ""
}

function accnt() {
  window.location.href = "managerAccount.html?" + uid + ""
}

function analytics(){
    window.location.href="analytics.html";
}

function schedule(){
    window.location.href="managerSchedule.html";
}

var issue=document.getElementById("issue");
var trade=document.getElementById("trade");

document.getElementById("issueSub").addEventListener("click", function(e){
  if(issue.value==""){
    alert("type a message.");
  }
  else{
  firebase.database().ref("SchedIssues").push({
    problem: issue.value,

  });
  issue.value='';
  }
});

/*document.getElementById("tradeSub").addEventListener("click", function(e){
  if(trade.value==""){
    alert("type a message.");
  }
  else{
  firebase.database().ref("SchedTrades").push({
    tRequest: trade.value,

  });
  trade.value='';
  }
});*/

function logout(){
  document.getElementById("logoutform").style.display = "block";
}

function confirmLogOut(){
  firebase.auth().signOut().then(() => {
    window.location.href = "/index.html"
  }).catch((error) => {
    alert("error")
  });
}

function shwMSch(){

position = ["Cashier", "Cook", "Driver"];
weekD = ["/Sunday/", "/Monday/", "/Tuesday/", "/Wednesday/", "/Thursday/", "/Friday/", "/Saturday/"];
time = ["1112", "1201", "0102", "0203", "0304", "0405", "0506", "0607", "0708"];
var name;
var temp;
var CKey, CSKey,DRKey

var ref = firebase.database().ref("Sch");
ref.once("value").then(function (snapshot) {

    for (var i = 0; i < time.length; i++) {

        for (var j = 0; j < weekD.length; j++) {

                CKey = snapshot.child(time[i] + weekD[j] + "working/" + "cook").val();
                CSKey = snapshot.child(time[i] + weekD[j] + "working/" + "cashier").val();
                DRKey = snapshot.child(time[i] + weekD[j] + "working/" + "driver").val();

                temp = CKey + "\n" + CSKey + "\n" + DRKey;

                document.getElementById("" + i + (j+1) + "").innerText = temp;

        }

    }

});

}

shwMSch();

</script>


</body>
</html>
